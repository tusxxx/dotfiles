#!/bin/bash

# SketchyBar Configuration

# Color Palette
export BLACK=0xff181926
export WHITE=0xffcad3f5
export RED=0xffed8796
export GREEN=0xffa6da95
export BLUE=0xff8aadf4
export YELLOW=0xffeed49f
export ORANGE=0xfff5a97f
export MAGENTA=0xffc6a0f6
export GREY=0xff939ab7
export TRANSPARENT=0x00000000

# Bar Appearance
export BAR_COLOR=0xff1e1e2e
export ITEM_BG_COLOR=0xff313244
export ACCENT_COLOR=$BLUE

# General bar properties
sketchybar --bar \
    height=32 \
    blur_radius=30 \
    position=top \
    padding_left=10 \
    padding_right=10 \
    color=$BAR_COLOR

# Default settings for all items
sketchybar --default \
    updates=when_shown \
    icon.font="SF Pro:Semibold:15.0" \
    icon.color=$WHITE \
    icon.padding_left=4 \
    icon.padding_right=4 \
    label.font="SF Pro:Semibold:13.0" \
    label.color=$WHITE \
    label.padding_left=4 \
    label.padding_right=4 \
    background.color=$ITEM_BG_COLOR \
    background.corner_radius=5 \
    background.height=24

# Left side items

# Apple logo
sketchybar --add item apple.logo left \
    --set apple.logo \
    icon= \
    icon.font="SF Pro:Black:16.0" \
    icon.color=$GREEN \
    padding_right=10 \
    label.drawing=off \
    click_script="sketchybar --set \$NAME popup.drawing=toggle"

# Spaces (desktops)
SPACE_ICONS=("1" "2" "3" "4" "5" "6" "7" "8" "9" "10")
for i in "${!SPACE_ICONS[@]}"; do
    sid=$(($i + 1))
    sketchybar --add space space.$sid left \
        --set space.$sid \
        associated_space=$sid \
        icon="${SPACE_ICONS[i]}" \
        icon.padding_left=8 \
        icon.padding_right=8 \
        background.color=$ITEM_BG_COLOR \
        background.corner_radius=5 \
        background.height=24 \
        background.drawing=on \
        label.drawing=off \
        script="$HOME/.config/sketchybar/plugins/space.sh" \
        click_script="yabai -m space --focus $sid"
done

sketchybar --add item space_separator left \
    --set space_separator \
    icon= \
    icon.color=$ACCENT_COLOR \
    icon.padding_left=4 \
    padding_right=10 \
    label.drawing=off \
    background.drawing=off

# Front app
sketchybar --add item front_app left \
    --set front_app \
    icon.drawing=off \
    background.color=$ACCENT_COLOR \
    label.color=$BLACK \
    script="$HOME/.config/sketchybar/plugins/front_app.sh" \
    --subscribe front_app front_app_switched

# Right side items

# Clock
sketchybar --add item clock right \
    --set clock \
    icon= \
    update_freq=10 \
    script="$HOME/.config/sketchybar/plugins/clock.sh"

# Battery
sketchybar --add item battery right \
    --set battery \
    update_freq=120 \
    script="$HOME/.config/sketchybar/plugins/battery.sh" \
    --subscribe battery system_woke power_source_change

# Volume
sketchybar --add item volume right \
    --set volume \
    script="$HOME/.config/sketchybar/plugins/volume.sh" \
    --subscribe volume volume_change

# CPU
sketchybar --add item cpu right \
    --set cpu \
    icon=󰻠 \
    update_freq=5 \
    script="$HOME/.config/sketchybar/plugins/cpu.sh"

# Memory
sketchybar --add item memory right \
    --set memory \
    icon=󰍛 \
    update_freq=5 \
    script="$HOME/.config/sketchybar/plugins/memory.sh"

# Finalizing
sketchybar --update

echo "SketchyBar configuration loaded..."
